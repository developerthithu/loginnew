<!DOCTYPE html>
<html>
<head>
<title>Facebook Login JavaScript Example</title>
<meta charset="UTF-8">
</head>
<body>
<script>
//[1] load lên các thành phần thiết
    window.fbAsyncInit = function() {
    FB.init({
      appId      : '996824617632539',
      cookie     : true,                     
      xfbml      : true,                    
      version    : 'v13.0'           
    });
    // kiểm tra trạng thái hiện tại
    FB.getLoginStatus(function(response) {   
      statusChangeCallback(response);        
    });
  
    // [2] Xử lý trạng thái đăng nhập
    function statusChangeCallback(response) {  
    if (response.status === 'connected') {   
        document.getElementById('btb').setAttribute('style', 'display:none');
        document.getElementById('lbl').setAttribute('style', 'display:block');
    } else if(response.status ==='not_authorized'){
        // user đã đăng nhập FB nhưng chưa đăng nhập ứng dụng
        ShowLoginButton();
    }
    // Người dùng chưa đăng nhập FB
    else{
        ShowLoginButton();
    }
    //[3] yêu cầu đăng nhập ứng dụng
    function RequestLoginFB(){
    window.location = 'https://graph.facebook.com/me?fields=id,name';
    }
    // [4] Hiển thị nút đăng nhập
    function ShowLoginButton() {
        document.getElementById('btb').setAttribute('style', 'display:block');
        document.getElementById('lbl').setAttribute('style', 'display:none');
    }
    // [5] Chào mừng người dùng đã đăng nhập
    function ShowWelcome() {
        document.getElementById('btb').setAttribute('style', 'display:none');            
        FB.api('/me', function (response) {
            var name = response.name;
            document.getElementById('lbl').innerHTML = 'Username' + name;
            document.getElementById('lbl').setAttribute('style', 'display:block');
        });
    }
        </script>
        <div id="fb-root"></div>
        <script>
        //***
        (function(d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.0";
        fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
        </script>
<!-- NÚT ĐĂNG NHẬP -->
    <input id="btb" type="button" value="ĐĂNG NHẬP" onclick="RequestLoginFB()" style="display:none" />
    <p id="lbl" style="display:none">BẠN ĐÃ ĐĂNG NHẬP THÀNH CÔNG!</p>
    <br />  
</body>
</html>
